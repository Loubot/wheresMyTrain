// Generated by CoffeeScript 1.6.3
(function() {
  var addStops;

  $(document).on('pageshow', '#display_train_page', function() {
    var trainInfo;
    trainInfo = JSON.parse(window.sessionStorage.getItem('trainInfo'));
    $.ajax({
      url: 'http://10.0.2.2:3000/train_info.json',
      data: {
        data: trainInfo.code
      },
      dataType: 'json',
      timeout: 10000,
      success: function(result) {
        return addStops(result);
      },
      error: function(error) {
        return console.log('displayTrain error ' + JSON.stringify(error));
      }
    });
    $('#displayTrain').append("" + trainInfo.desc);
    return createMap(trainInfo.lat, trainInfo.lon, trainInfo.desc, 'mapContainer');
  });

  addStops = function(stopsInfo) {
    return $(stopsInfo).each(function() {
      return $('#trainStops').append("<a href=\"#\" onclick=\"showStation()\">" + this.stop + ": Expected arrival: " + this.exArrival + ", Expected departure: " + this.exDepart + "</p>");
    });
  };

  window.showStation = function() {
    return alert('yos');
  };

}).call(this);
