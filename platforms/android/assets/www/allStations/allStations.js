// Generated by CoffeeScript 1.6.3
(function() {
  var populateAllStationsPage;

  $(document).on('pagebeforeshow', '#all_stations_page', function() {
    return getStations('A');
  });

  window.getStations = function(choice) {
    return $.ajax({
      url: "http://10.0.2.2:3000/get_all_stations.json",
      data: {
        type: choice
      },
      type: 'get',
      dataType: 'json',
      timeout: 10000,
      success: function(result) {
        return populateAllStationsPage(result);
      },
      error: function(error) {
        return console.log('Get all stations failed ' + JSON.stringify(error));
      }
    });
  };

  populateAllStationsPage = function(json) {
    $('#allStationsList').empty();
    return $(json).each(function() {
      return $('#allStationsList').append("<a href=\"#\" onclick=\"getStationInfo('" + this.StationCode + "')\">" + this.StationDesc + "</a><hr> ");
    });
  };

  window.getStationInfo = function(code) {
    window.sessionStorage.setItem('stationCode', code);
    return $.mobile.changePage('../displayStation/displayStation.html', {
      transition: 'slide',
      changeHash: true
    });
  };

}).call(this);
